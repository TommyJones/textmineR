<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
<ol start="3" style="list-style-type: decimal">
<li>Topic modeling</li>
</ol> • textmineR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="&lt;ol start=" style="list-style-type: decimal">
</head>
<body>
<li>Topic modeling</li>
" /&gt;

<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">textmineR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.2.999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a_start_here.html">1. Start here</a>
    </li>
    <li>
      <a href="../articles/b_document_clustering.html">2. document clustering</a>
    </li>
    <li>
      <a href="../articles/c_topic_modeling.html">3. Topic modeling</a>
    </li>
    <li>
      <a href="../articles/d_text_embeddings.html">4. Text embeddings</a>
    </li>
    <li>
      <a href="../articles/e_doc_summarization.html">5. Document summarization</a>
    </li>
    <li>
      <a href="../articles/f_tidytext_example.html">6. Using tidytext with textmineR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TommyJones/textmineR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1><ol start="3" style="list-style-type: decimal">
<li>Topic modeling</li>
</ol></h1>
                        <h4 class="author">Thomas W. Jones</h4>
            
            <h4 class="date">2019-01-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/TommyJones/textmineR/blob/master/vignettes/c_topic_modeling.Rmd"><code>vignettes/c_topic_modeling.Rmd</code></a></small>
      <div class="hidden name"><code>c_topic_modeling.Rmd</code></div>

    </div>

    
    
<div id="topic-modeling" class="section level1">
<h1 class="hasAnchor">
<a href="#topic-modeling" class="anchor"></a>Topic modeling</h1>
<p>textmineR has extensive functionality for topic modeling. You can fit Latent Dirichlet Allocation (LDA), Correlated Topic Models (CTM), and Latent Semantic Analysis (LSA) from within textmineR. (Examples with LDA and LSA follow below.) As of this writing, textmineR’s LDA and CTM functions are wrappers for other packages to facilitate a consistent workflow. (And textmineR takes advantage of the <code>RSpectra</code> package for LSA’s single-value decomposition.) Plans exist to implement LDA natively with <code>Rcpp</code> sometime in 2018.</p>
<p>textmineR’s consistent representation of topic models boils down to two matrices. The first, “theta” (<span class="math inline">\(\Theta\)</span>), has rows representing a distribution of topics over documents. The second, phi (<span class="math inline">\(\Phi\)</span>), has rows representing a distribution of words over topics. In the case of probabilistic models, these are categorical probability distributions. For non-probabilistic models (e.g. LSA) these distributions are, obviously, not probabilities. With LSA, for example, there is a third object representing the singular values in the decomposition.</p>
<p>In addition, textmineR has utility functions for topic models. This includes some original research. Examples include an R-squared for probabilistic topic models (<a href="https://drive.google.com/file/d/0Bz2enPyUvnKIQmtDTEswbzdUMU0/view">working paper here</a>), probabilistic coherence (a measure of topic quality), and a topic labeling function based on most-probable bigrams. Other utilities are demonstrated below</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(textmineR)
<span class="co">#&gt; Loading required package: Matrix</span>

<span class="co"># load nih_sample data set from textmineR</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(nih_sample)

<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(nih_sample)
<span class="co">#&gt; 'data.frame':    100 obs. of  44 variables:</span>
<span class="co">#&gt;  $ APPLICATION_ID        : chr  "8693991" "8693362" "8607498" "8697008" ...</span>
<span class="co">#&gt;  $ ABSTRACT_TEXT         : chr  "Methamphetamine (MA) is remarkably addictive and relapse to excessive use is highly probable and poses serious "| __truncated__ " Project Summary Risk bimarkers have become increasingly important in clinical decision making, guiding patient"| __truncated__ "    DESCRIPTION (provided by applicant): Despite enormous efforts, no effective vaccine is currently available "| __truncated__ "    DESCRIPTION (provided by applicant): This four-year K01 award application is to provide intensive multi-dis"| __truncated__ ...</span>
<span class="co">#&gt;  $ ACTIVITY              : chr  "P50" "R01" "R21" "K01" ...</span>
<span class="co">#&gt;  $ ADMINISTERING_IC      : chr  "DA" "GM" "AI" "AI" ...</span>
<span class="co">#&gt;  $ APPLICATION_TYPE      : chr  "5" "2" "5" "5" ...</span>
<span class="co">#&gt;  $ ARRA_FUNDED           : chr  "N" "N" "N" "N" ...</span>
<span class="co">#&gt;  $ AWARD_NOTICE_DATE     : chr  "06/30/2014" "05/27/2014" "01/03/2014" "07/11/2014" ...</span>
<span class="co">#&gt;  $ BUDGET_START          : chr  "07/01/2014" "06/01/2014" "02/01/2014" "08/01/2014" ...</span>
<span class="co">#&gt;  $ BUDGET_</span><span class="re">END</span><span class="co">            : chr  "06/30/2015" "04/30/2015" "01/31/2015" "07/31/2015" ...</span>
<span class="co">#&gt;  $ CFDA_CODE             : chr  "" "859" "855" "855" ...</span>
<span class="co">#&gt;  $ CORE_PROJECT_NUM      : chr  "P50DA018165" "R01GM085047" "R21AI100696" "K01AI100681" ...</span>
<span class="co">#&gt;  $ ED_INST_TYPE          : chr  "" "" "SCHOOLS OF MEDICINE" "SCHOOLS OF MEDICINE" ...</span>
<span class="co">#&gt;  $ FOA_NUMBER            : chr  "PAR-10-189" "PA-11-260" "PA-11-261" "PA-11-190" ...</span>
<span class="co">#&gt;  $ FULL_PROJECT_NUM      : chr  "5P50DA018165-08" "2R01GM085047-05" "5R21AI100696-02" "5K01AI100681-03" ...</span>
<span class="co">#&gt;  $ FUNDING_ICs           : chr  "NIDA:212488\\" "NIGMS:326324\\" "NIAID:209613\\" "NIAID:132182\\" ...</span>
<span class="co">#&gt;  $ FUNDING_MECHANISM     : chr  "Research Centers" "Research Projects" "Research Projects" "Other Research Related" ...</span>
<span class="co">#&gt;  $ FY                    : chr  "2014" "2014" "2014" "2014" ...</span>
<span class="co">#&gt;  $ IC_NAME               : chr  "NATIONAL INSTITUTE ON DRUG ABUSE" "NATIONAL INSTITUTE OF GENERAL MEDICAL SCIENCES" "NATIONAL INSTITUTE OF ALLERGY AND INFECTIOUS DISEASES" "NATIONAL INSTITUTE OF ALLERGY AND INFECTIOUS DISEASES" ...</span>
<span class="co">#&gt;  $ NIH_SPENDING_CATS     : chr  "" "" "" "" ...</span>
<span class="co">#&gt;  $ ORG_CITY              : chr  "PORTLAND" "SEATTLE" "NEW HAVEN" "BALTIMORE" ...</span>
<span class="co">#&gt;  $ ORG_COUNTRY           : chr  "UNITED STATES" "UNITED STATES" "UNITED STATES" "UNITED STATES" ...</span>
<span class="co">#&gt;  $ ORG_DEPT              : chr  "" "" "MICROBIOLOGY/IMMUN/VIROLOGY" "EMERGENCY MEDICINE" ...</span>
<span class="co">#&gt;  $ ORG_DISTRICT          : chr  "03" "" "03" "07" ...</span>
<span class="co">#&gt;  $ ORG_DUNS              : chr  "" "" "" "" ...</span>
<span class="co">#&gt;  $ ORG_FIPS              : chr  "" "US" "US" "US" ...</span>
<span class="co">#&gt;  $ ORG_NAME              : chr  "OREGON HEALTH &amp;SCIENCE UNIVERSITY" "FRED HUTCHINSON CANCER RESEARCH CENTER" "YALE UNIVERSITY" "JOHNS HOPKINS UNIVERSITY" ...</span>
<span class="co">#&gt;  $ ORG_STATE             : chr  "OR" "WA" "CT" "MD" ...</span>
<span class="co">#&gt;  $ ORG_ZIPCODE           : chr  "" "981091024" "065103209" "212182608" ...</span>
<span class="co">#&gt;  $ PHR                   : chr  "Many individuals try MA, but only some become addicted and continue to use MA even though it has profoundly adv"| __truncated__ "PUBLIC HEALTH RELEVANCE: The research proposal addresses the pressing need for strong statistical input in the "| __truncated__ "PUBLIC HEALTH RELEVANCE: This application proposes the development of single-molecule Fluorescence Resonance En"| __truncated__ " Project Narrative Emergency department-based HIV testing programs in the United States have identified thousan"| __truncated__ ...</span>
<span class="co">#&gt;  $ PI_IDS                : chr  "1910136;" "8572341;" "7051811;" "8633321;" ...</span>
<span class="co">#&gt;  $ PI_NAMEs              : chr  "PHILLIPS, TAMARA J;" "ZHENG, YINGYE;" "MOTHES, WALTHER H;" "HSIEH, YU-HSIANG;" ...</span>
<span class="co">#&gt;  $ PROGRAM_OFFICER_NAME  : chr  "" "LYSTER, PETER " "SHARMA, OPENDRA K." "MCKAIG, ROSEMARY G." ...</span>
<span class="co">#&gt;  $ PROJECT_START         : chr  "" "09/04/2009" "02/01/2013" "08/15/2012" ...</span>
<span class="co">#&gt;  $ PROJECT_</span><span class="re">END</span><span class="co">           : chr  "" "04/30/2018" "01/31/2015" "07/31/2016" ...</span>
<span class="co">#&gt;  $ PROJECT_TERMS         : chr  "Acute;Adverse effects;Animal Model;Animals;Anxiety;Behavior;Behavioral;Behavioral Genetics;Biometry;Blood speci"| __truncated__ "Address;Aftercare;Algorithms;base;Biological;Biological Markers;Breast Cancer Detection;cancer therapy;case con"| __truncated__ "Affect;AIDS/HIV problem;Antibodies;Antibody Binding Sites;Binding (Molecular Function);Communities;Coupled;Deve"| __truncated__ "Accident and Emergency department;Acute;Address;Affect;AIDS prevention;AIDS/HIV problem;Area;Baltimore;base;Beh"| __truncated__ ...</span>
<span class="co">#&gt;  $ PROJECT_TITLE         : chr  "Genetic and Neuroimmunological Factors in Methamphetamine Addicition" "Statistical Methods for Prospective Evaluation of Biomarkers" "Single molecule imaging of HIV Env" "Cost-Effectiveness of ED HIV Testing Program Agent-Based Modeling Approach" ...</span>
<span class="co">#&gt;  $ SERIAL_NUMBER         : chr  "18165" "85047" "100696" "100681" ...</span>
<span class="co">#&gt;  $ STUDY_SECTION         : chr  "ZDA1" "CBSS" "VACC" "AIDS" ...</span>
<span class="co">#&gt;  $ STUDY_SECTION_NAME    : chr  "Special Emphasis Panel" "Cancer Biomarkers Study Section" "HIV/AIDS Vaccines Study Study Section" "Acquired Immunodeficiency Syndrome Research Review Committee" ...</span>
<span class="co">#&gt;  $ SUBPROJECT_ID         : chr  "6488" "" "" "" ...</span>
<span class="co">#&gt;  $ SUFFIX                : chr  "" "" "" "" ...</span>
<span class="co">#&gt;  $ SUPPORT_YEAR          : chr  "8" "5" "2" "3" ...</span>
<span class="co">#&gt;  $ TOTAL_COST            : chr  "" "326324" "209613" "132182" ...</span>
<span class="co">#&gt;  $ TOTAL_COST_SUB_PROJECT: chr  "212488" "" "" "" ...</span>

<span class="co"># create a document term matrix </span>
dtm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/CreateDtm.html">CreateDtm</a></span>(<span class="dt">doc_vec =</span> nih_sample<span class="op">$</span>ABSTRACT_TEXT, <span class="co"># character vector of documents</span>
                 <span class="dt">doc_names =</span> nih_sample<span class="op">$</span>APPLICATION_ID, <span class="co"># document names</span>
                 <span class="dt">ngram_window =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="co"># minimum and maximum n-gram length</span>
                 <span class="dt">stopword_vec =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(stopwords<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"en"</span>), <span class="co"># stopwords from tm</span>
                                  stopwords<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="dt">source =</span> <span class="st">"smart"</span>)), <span class="co"># this is the default value</span>
                 <span class="dt">lower =</span> <span class="ot">TRUE</span>, <span class="co"># lowercase - this is the default value</span>
                 <span class="dt">remove_punctuation =</span> <span class="ot">TRUE</span>, <span class="co"># punctuation - this is the default</span>
                 <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="co"># numbers - this is the default</span>
                 <span class="dt">verbose =</span> <span class="ot">FALSE</span>, <span class="co"># Turn off status bar for this demo</span>
                 <span class="dt">cpus =</span> <span class="dv">2</span>) <span class="co"># default is all available cpus on the system</span>

dtm &lt;-<span class="st"> </span>dtm[,<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(dtm) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>]</code></pre></div>
<div id="lda-example" class="section level3">
<h3 class="hasAnchor">
<a href="#lda-example" class="anchor"></a>LDA Example</h3>
<p>To fit an LDA model in textmineR, use the <code>FitLdaModel</code> function. Input is a document term matrix. textmineR implements 2 methods for LDA, Gibbs sampling, and variational expectation maximization (also known as variational Bayes). The default is Gibbs sampling.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Fit a Latent Dirichlet Allocation model</span>
<span class="co"># note the number of topics is arbitrary here</span>
<span class="co"># see extensions for more info</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">12345</span>)

model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FitLdaModel.html">FitLdaModel</a></span>(<span class="dt">dtm =</span> dtm, 
                     <span class="dt">k =</span> <span class="dv">20</span>,
                     <span class="dt">iterations =</span> <span class="dv">200</span>, <span class="co"># I usually recommend at least 500 iterations or more</span>
                     <span class="dt">burnin =</span> <span class="dv">180</span>,
                     <span class="dt">alpha =</span> <span class="fl">0.1</span>,
                     <span class="dt">beta =</span> <span class="fl">0.05</span>,
                     <span class="dt">optimize_alpha =</span> <span class="ot">TRUE</span>,
                     <span class="dt">calc_likelihood =</span> <span class="ot">TRUE</span>,
                     <span class="dt">calc_coherence =</span> <span class="ot">TRUE</span>,
                     <span class="dt">calc_r2 =</span> <span class="ot">TRUE</span>,
                     <span class="dt">cpus =</span> <span class="dv">2</span>) </code></pre></div>
<p>The output from the model is an S3 object of class <code>lda_topic_model</code>. It contains several objects. The most important are three matrices: <code>theta</code> gives <span class="math inline">\(P(topic_k|document_d)\)</span>, <code>phi</code> gives <span class="math inline">\(P(token_v|topic_k)\)</span>, and <code>gamma</code> gives <span class="math inline">\(P(topic_k|token_v)\)</span>. (For more on <code>gamma</code>, see below.) Then <code>data</code> is the DTM or TCM used to train the model. <code>alpha</code> and <code>beta</code> are the Dirichlet priors for topics over documents and tokens over topics, respectively. The <code>log_likelihood</code> is <span class="math inline">\(P(tokens|topics)\)</span> at each iteration. <code>coherence</code> gives the probabilistic coherence of each topic. And <code>r2</code> is the R-squared of the model given the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(model)
<span class="co">#&gt; List of 9</span>
<span class="co">#&gt;  $ phi           : num [1:20, 1:2379] 4.11e-05 1.33e-03 4.80e-05 1.61e-03 6.70e-05 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:20] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;  $ theta         : num [1:100, 1:20] 0.010145 0.204369 0.120183 0.002828 0.000671 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:100] "8693991" "8693362" "8607498" "8697008" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:20] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;  $ gamma         : num [1:20, 1:2379] 0.0175 0.3467 0.017 0.3493 0.0166 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:20] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;  $ data          :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots</span>
<span class="co">#&gt;   .. ..@ i       : int [1:11419] 11 49 96 5 6 3 86 89 12 14 ...</span>
<span class="co">#&gt;   .. ..@ p       : int [1:2380] 0 3 5 8 9 12 13 14 15 18 ...</span>
<span class="co">#&gt;   .. ..@ Dim     : int [1:2] 100 2379</span>
<span class="co">#&gt;   .. ..@ Dimnames:List of 2</span>
<span class="co">#&gt;   .. .. ..$ : chr [1:100] "8693991" "8693362" "8607498" "8697008" ...</span>
<span class="co">#&gt;   .. .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;   .. ..@ x       : num [1:11419] 1 1 1 1 2 1 1 1 3 1 ...</span>
<span class="co">#&gt;   .. ..@ factors : list()</span>
<span class="co">#&gt;  $ alpha         : num [1:20] 0.1328 0.0883 0.124 0.0715 0.0862 ...</span>
<span class="co">#&gt;  $ beta          : num [1:20, 1:2379] 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 ...</span>
<span class="co">#&gt;  $ log_likelihood:'data.frame':  20 obs. of  2 variables:</span>
<span class="co">#&gt;   ..$ iteration     : num [1:20] 0 10 20 30 40 50 60 70 80 90 ...</span>
<span class="co">#&gt;   ..$ log_likelihood: num [1:20] -178217 -166743 -163693 -162605 -161958 ...</span>
<span class="co">#&gt;  $ coherence     : Named num [1:20] 0.0642 0.2612 0.0905 0.3991 0.1508 ...</span>
<span class="co">#&gt;   ..- attr(*, "names")= chr [1:20] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;  $ r2            : num 0.275</span>
<span class="co">#&gt;  - attr(*, "class")= chr "lda_topic_model"</span></code></pre></div>
<p>Once we have created a model, we need to evaluate it. For overall goodness of fit, textmineR has R-squared and log likelihood. R-squared is interpretable as the proportion of variability in the data explained by the model, as with linear regression. For a full derivation and explanation of properties. See the working paper, <a href="https://drive.google.com/file/d/0Bz2enPyUvnKIQmtDTEswbzdUMU0/view">here</a>.</p>
<p>The log likelihood has a more difficult interpretation. Though, as shown in the R-squared working paper, R-squared and log likelihood are highly correlated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># R-squared </span>
<span class="co"># - only works for probabilistic models like LDA and CTM</span>
model<span class="op">$</span>r2
<span class="co">#&gt; [1] 0.2747765</span>

<span class="co"># log Likelihood (does not consider the prior) </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(model<span class="op">$</span>log_likelihood, <span class="dt">type =</span> <span class="st">"l"</span>)</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Next, we turn our attention to topic quality. There are many “topic coherence” metrics available in the literature. For example, see <a href="https://svn.aksw.org/papers/2015/WSDM_Topic_Evaluation/public.pdf">this paper</a> or <a href="https://mimno.infosci.cornell.edu/nips2013ws/nips2013tm_submission_7.pdf">this paper</a>. textmineR implements a new topic coherence measure based on probability theory. (A formal write up of this metric will be included in my PhD dissertation, expected 2020.)</p>
<p>Probabilistic coherence measures how associated words are in a topic, controlling for statistical independence. For example, suppose you have a corpus of articles from the sports section of a newspaper. A topic with the words {sport, sports, ball, fan, athlete} would look great if you look at correlation, without correcting for independence. But we actually know that it’s a terrible topic because the words are so frequent in this corpus as to be meaningless. In other words, they are highly correlated with each other but they are statistically-independent of each other.</p>
<p>For each pair of words <span class="math inline">\(\{a, b\}\)</span> in the top M words in a topic, probabilistic coherence calculates <span class="math inline">\(P(b|a) - P(b)\)</span>, where <span class="math inline">\(\{a\}\)</span> is more probable than <span class="math inline">\(\{b\}\)</span> in the topic.</p>
<p>Here’s the logic: if we restrict our search to only documents that contain the word <span class="math inline">\(\{a\}\)</span>, then the word <span class="math inline">\(\{b\}\)</span> should be more more probable in those documents than if chosen at random from the corpus. <span class="math inline">\(P(b|a)\)</span> measures how probable <span class="math inline">\(\{b\}\)</span> is only in documents containing <span class="math inline">\(\{a\}\)</span>. <span class="math inline">\(P(b)\)</span> measures how probable <span class="math inline">\(\{b\}\)</span> is in the corpus as a whole. If <span class="math inline">\(\{b\}\)</span> is not more probable in documents containing <span class="math inline">\(\{a\}\)</span>, then the difference <span class="math inline">\(P(b|a) - P(b)\)</span> should be close to zero.</p>
<p>For example, suppose the top 4 words in a topic are <span class="math inline">\(\{a, b, c, d\}\)</span>. Then, we calculate</p>
<ol style="list-style-type: decimal">
<li>
<span class="math inline">\(P(a|b) - P(b)\)</span>, <span class="math inline">\(P(a|c) - P(c)\)</span>, <span class="math inline">\(P(a|d) - P(d)\)</span>
</li>
<li>
<span class="math inline">\(P(b|c) - P(c)\)</span>, <span class="math inline">\(P(b|d) - P(d)\)</span>
</li>
<li><span class="math inline">\(P(c|d) - P(d)\)</span></li>
</ol>
<p>And all 6 differences are averaged together, giving the probabilistic coherence measure.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># probabilistic coherence, a measure of topic quality</span>
<span class="co"># this measure can be used with any topic model, not just probabilistic ones</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(model<span class="op">$</span>coherence)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;  0.0060  0.1188  0.1543  0.1787  0.2187  0.4117</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/hist">hist</a></span>(model<span class="op">$</span>coherence, 
     <span class="dt">col=</span> <span class="st">"blue"</span>, 
     <span class="dt">main =</span> <span class="st">"Histogram of probabilistic coherence"</span>)</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-5-1.png" width="720"></p>
<p>We’ll see the real value of coherence after calculating a few more objects. In the chunk below, we will</p>
<ol style="list-style-type: decimal">
<li>Pull out the top 5 terms for each topic</li>
<li>Calculate the most frequent (prevalent) topics in the corpus</li>
<li>Get some bi-gram topic labels from a naive labeling algorithm (These naive labels are based on <span class="math inline">\(P(\text{bi-gram}|\text{topic}) - P(\text{bi-gram})\)</span>. Noticing a theme?)</li>
</ol>
<p>We’ll then pull these together, along with coherence, into a table that summarizes the topic model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the top terms of each topic</span>
model<span class="op">$</span>top_terms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetTopTerms.html">GetTopTerms</a></span>(<span class="dt">phi =</span> model<span class="op">$</span>phi, <span class="dt">M =</span> <span class="dv">5</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(model<span class="op">$</span>top_terms)</code></pre></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left">t_1</td>
<td align="left">develop</td>
<td align="left">data</td>
<td align="left">design</td>
<td align="left">time</td>
<td align="left">methods</td>
</tr>
<tr class="even">
<td align="left">t_2</td>
<td align="left">injury</td>
<td align="left">determine</td>
<td align="left">cmybp</td>
<td align="left">function</td>
<td align="left">fragment</td>
</tr>
<tr class="odd">
<td align="left">t_3</td>
<td align="left">study</td>
<td align="left">inflammation</td>
<td align="left">assess</td>
<td align="left">patients</td>
<td align="left">therapy</td>
</tr>
<tr class="even">
<td align="left">t_4</td>
<td align="left">mast</td>
<td align="left">cns</td>
<td align="left">cell</td>
<td align="left">mast_cell</td>
<td align="left">fc</td>
</tr>
<tr class="odd">
<td align="left">t_5</td>
<td align="left">ptc</td>
<td align="left">treatment</td>
<td align="left">brafv</td>
<td align="left">tissue</td>
<td align="left">dcis</td>
</tr>
<tr class="even">
<td align="left">t_6</td>
<td align="left">ipf</td>
<td align="left">lung</td>
<td align="left">data</td>
<td align="left">expression</td>
<td align="left">studies</td>
</tr>
</tbody></table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the prevalence of each topic</span>
<span class="co"># You can make this discrete by applying a threshold, say 0.05, for</span>
<span class="co"># topics in/out of docuemnts. </span>
model<span class="op">$</span>prevalence &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(model<span class="op">$</span>theta) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(model<span class="op">$</span>theta) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>

<span class="co"># prevalence should be proportional to alpha</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(model<span class="op">$</span>prevalence, model<span class="op">$</span>alpha, <span class="dt">xlab =</span> <span class="st">"prevalence"</span>, <span class="dt">ylab =</span> <span class="st">"alpha"</span>)</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># textmineR has a naive topic labeling tool based on probable bigrams</span>
model<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../reference/LabelTopics.html">LabelTopics</a></span>(<span class="dt">assignments =</span> model<span class="op">$</span>theta <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.05</span>, 
                            <span class="dt">dtm =</span> dtm,
                            <span class="dt">M =</span> <span class="dv">1</span>)

<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(model<span class="op">$</span>labels)
<span class="co">#&gt;     label_1                      </span>
<span class="co">#&gt; t_1 "radiation_necrosis"         </span>
<span class="co">#&gt; t_2 "kda_fragment"               </span>
<span class="co">#&gt; t_3 "cardiovascular_disease"     </span>
<span class="co">#&gt; t_4 "mast_cell"                  </span>
<span class="co">#&gt; t_5 "radiation_necrosis"         </span>
<span class="co">#&gt; t_6 "laparoscopic_fundoplication"</span>

<span class="co"># put them together, with coherence into a summary table</span>
model<span class="op">$</span>summary &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">topic =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(model<span class="op">$</span>phi),
                            <span class="dt">label =</span> model<span class="op">$</span>labels,
                            <span class="dt">coherence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(model<span class="op">$</span>coherence, <span class="dv">3</span>),
                            <span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(model<span class="op">$</span>prevalence,<span class="dv">3</span>),
                            <span class="dt">top_terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(model<span class="op">$</span>top_terms, <span class="dv">2</span>, <span class="cf">function</span>(x){
                              <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(x, <span class="dt">collapse =</span> <span class="st">", "</span>)
                            }),
                            <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model<span class="op">$</span>summary[ <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(model<span class="op">$</span>summary<span class="op">$</span>prevalence, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>) , ][ <span class="dv">1</span><span class="op">:</span><span class="dv">10</span> , ]</code></pre></div>
<table class="table">
<caption>Summary of 10 most prevalent topics</caption>
<thead><tr class="header">
<th></th>
<th align="left">topic</th>
<th align="left">label_1</th>
<th align="right">coherence</th>
<th align="right">prevalence</th>
<th align="left">top_terms</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>t_12</td>
<td align="left">t_12</td>
<td align="left">long_term</td>
<td align="right">0.258</td>
<td align="right">9.238</td>
<td align="left">models, long, term, development, long_term</td>
</tr>
<tr class="even">
<td>t_20</td>
<td align="left">t_20</td>
<td align="left">mental_health</td>
<td align="right">0.158</td>
<td align="right">7.827</td>
<td align="left">research, core, center, support, investigators</td>
</tr>
<tr class="odd">
<td>t_1</td>
<td align="left">t_1</td>
<td align="left">radiation_necrosis</td>
<td align="right">0.064</td>
<td align="right">7.705</td>
<td align="left">develop, data, design, time, methods</td>
</tr>
<tr class="even">
<td>t_19</td>
<td align="left">t_19</td>
<td align="left">cancer_prevention</td>
<td align="right">0.104</td>
<td align="right">7.113</td>
<td align="left">research, health, program, training, cancer</td>
</tr>
<tr class="odd">
<td>t_7</td>
<td align="left">t_7</td>
<td align="left">mast_cell</td>
<td align="right">0.143</td>
<td align="right">6.672</td>
<td align="left">cells, cell, aim, specific, pathways</td>
</tr>
<tr class="even">
<td>t_17</td>
<td align="left">t_17</td>
<td align="left">provided_applicant</td>
<td align="right">0.121</td>
<td align="right">6.440</td>
<td align="left">rna, structural, structure, cdk, activity</td>
</tr>
<tr class="odd">
<td>t_11</td>
<td align="left">t_11</td>
<td align="left">risk_factors</td>
<td align="right">0.120</td>
<td align="right">5.871</td>
<td align="left">risk, health, factors, study, early</td>
</tr>
<tr class="even">
<td>t_3</td>
<td align="left">t_3</td>
<td align="left">cardiovascular_disease</td>
<td align="right">0.090</td>
<td align="right">5.300</td>
<td align="left">study, inflammation, assess, patients, therapy</td>
</tr>
<tr class="odd">
<td>t_16</td>
<td align="left">t_16</td>
<td align="left">risk_factors</td>
<td align="right">0.115</td>
<td align="right">5.256</td>
<td align="left">genetic, disease, ma, psoriasis, exposure</td>
</tr>
<tr class="even">
<td>t_10</td>
<td align="left">t_10</td>
<td align="left">breast_cancer</td>
<td align="right">0.181</td>
<td align="right">4.628</td>
<td align="left">brain, cancer, imaging, metastatic, tumor</td>
</tr>
</tbody>
</table>
<p>Ok, you’ve built a topic model. You’ve decided how well it fits your data. You’ve examined coherence, top words, and so on. Now you want to get topic distributions for new documents. (Remember, we only used 500 of our 5,000 documents to train the model.) <code>textmineR</code> provides a couple of ways to do this. The full Bayesian approach is to use Gibbs sampling, holding the topic distributions in <code>phi</code> fixed. The more frequentist way is using the <code>gamma</code> object returned when we ran <code>FitLdaModel</code>. (You can also calculate it separately with the <code>CalcGamma</code> function.)</p>
<p><code>gamma</code> or <span class="math inline">\(\Gamma\)</span> is a matrix whose entries represent $P(|). To calculate this, we need Bayes’ Rule.</p>
<p>The rows of <code>phi</code> or <span class="math inline">\(\Phi\)</span> are <span class="math inline">\(P(\text{token}|\text{topic})\)</span>. However, to get predictions for new documents, we need <span class="math inline">\(P(\text{topic}|\text{token})\)</span>. Remembering Bayes’ Rule, we get</p>
<span class="math display">\[\begin{align}
  P(\text{topic}|\text{token}) 
    &amp;= \frac{P(\text{token}|\text{topic})P(\text{topic})}{P(\text{token})}
\end{align}\]</span>
<p>Detail-oriented readers may wonder how you can get <span class="math inline">\(P(\text{topic})\)</span>. We can get this through <span class="math inline">\(\sum_j P(\text{topic}|\text{document}_j)P(\text{document}_j)\)</span>.</p>
<p>For now, textmineR refers to the resulting matrix as <span class="math inline">\(\Gamma\)</span> or “phi prime”. (Note: this will be called <span class="math inline">\(\Gamma\)</span> or “gamma” in textmineR version 3.0+.)</p>
<p>textmineR’s <code>CalcPhiPrime</code> function does the above calculations for you.</p>
<p>Once you have <span class="math inline">\(\Gamma\)</span>, a simple dot product with the DTM of your new documents (<span class="math inline">\(A\)</span>) will get new topic predictions.</p>
<span class="math display">\[\begin{align}
  \Theta_{new} 
    &amp;= A \cdot \Gamma^T
\end{align}\]</span>
<p>Both methods are available through <code>predict.lda_topic_model</code> with the <code>method</code> argument (“dot” or “gibbs”). Which method should you use? In most cases, I’d recommend “gibbs”. However, “dot” is useful for speed if that’s necessary. Also, <code>gamma</code> can be examined along with <code>phi</code> for corpus analysis.</p>
<p>Do note how much faster “dot” is when running the two below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># predictions with gibbs</span>
assignments &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, dtm,
                       <span class="dt">method =</span> <span class="st">"gibbs"</span>, 
                       <span class="dt">iterations =</span> <span class="dv">200</span>,
                       <span class="dt">burnin =</span> <span class="dv">180</span>,
                       <span class="dt">cpus =</span> <span class="dv">2</span>)

<span class="co"># predictions with dot</span>
assignments_dot &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, dtm,
                           <span class="dt">method =</span> <span class="st">"dot"</span>)


<span class="co"># compare</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/barplot">barplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(assignments[<span class="dv">10</span>,], assignments_dot[<span class="dv">10</span>,]),
        <span class="dt">col =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"red"</span>, <span class="st">"blue"</span>), <span class="dt">las =</span> <span class="dv">2</span>, <span class="dt">beside =</span> <span class="ot">TRUE</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/legend">legend</a></span>(<span class="st">"topright"</span>, <span class="dt">legend =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"gibbs"</span>, <span class="st">"dot"</span>), <span class="dt">col =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"red"</span>, <span class="st">"blue"</span>), 
       <span class="dt">fill =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-12-1.png" width="720"></p>
<p>If you compare the two methods in the image above, you can see that Gibbs sampling is slower, but has a much less noisy result.</p>
</div>
<div id="lsa-example" class="section level3">
<h3 class="hasAnchor">
<a href="#lsa-example" class="anchor"></a>LSA Example</h3>
<p>Latent semantic analysis was arguably the first topic model. <a href="https://en.wikipedia.org/wiki/Latent_semantic_analysis">LSA was patented in 1988</a>. It uses a <a href="https://en.wikipedia.org/wiki/Singular-value_decomposition">single value decomposition</a> on a document term matrix, TF-IDF matrix, or similar.</p>
<p>In textmineR’s notation:</p>
<span class="math display">\[\begin{align}
  A &amp;= \Theta \cdot S \cdot \Phi
\end{align}\]</span>
<p><span class="math inline">\(\Theta\)</span> and <span class="math inline">\(\Phi\)</span> have the same (though non-probabilistic) interpretation as in LDA. <span class="math inline">\(S\)</span> is the matrix of single values.</p>
<p>The workflow for LSA is largely the same for LDA. Two key differences: we will use the IDF vector mentioned above to create a TF-IDF matrix and we cannot get an R-squared for LSA as it is non-probabilistic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># get a tf-idf matrix</span>
tf_sample &lt;-<span class="st"> </span><span class="kw"><a href="../reference/TermDocFreq.html">TermDocFreq</a></span>(dtm)

tf_sample<span class="op">$</span>idf[ <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/is.finite">is.infinite</a></span>(tf_sample<span class="op">$</span>idf) ] &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># fix idf for missing words</span>

tf_idf &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(dtm <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">rowSums</a></span>(dtm)) <span class="op">*</span><span class="st"> </span>tf_sample<span class="op">$</span>idf

tf_idf &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(tf_idf)

<span class="co"># Fit a Latent Semantic Analysis model</span>
<span class="co"># note the number of topics is arbitrary here</span>
<span class="co"># see extensions for more info</span>
lsa_model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FitLsaModel.html">FitLsaModel</a></span>(<span class="dt">dtm =</span> tf_idf, 
                     <span class="dt">k =</span> <span class="dv">100</span>)
<span class="co">#&gt; Warning in fun(A, k, nu, nv, opts, mattype = "dgCMatrix"): all singular</span>
<span class="co">#&gt; values are requested, svd() is used instead</span>

<span class="co"># objects: </span>
<span class="co"># sv = a vector of singular values created with SVD</span>
<span class="co"># theta = distribution of topics over documents</span>
<span class="co"># phi = distribution of words over topics</span>
<span class="co"># gamma = predition matrix, distribution of topics over words</span>
<span class="co"># coherence = coherence of each topic</span>
<span class="co"># data = data used to train model</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(lsa_model)
<span class="co">#&gt; List of 7</span>
<span class="co">#&gt;  $ sv       : num [1:100] 1.572 1.42 0.676 0.589 0.568 ...</span>
<span class="co">#&gt;  $ theta    : num [1:100, 1:100] -0.000196 -0.000082 -0.000198 -0.000111 -0.007455 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:100] "8693991" "8693362" "8607498" "8697008" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:100] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;  $ phi      : num [1:100, 1:2379] -8.11e-06 1.52e-05 1.09e-02 -8.84e-03 -5.37e-03 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:100] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;  $ nconv    : int 100</span>
<span class="co">#&gt;  $ gamma    : num [1:100, 1:2379] -5.16e-06 1.07e-05 1.62e-02 -1.50e-02 -9.44e-03 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:100] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;  $ coherence: Named num [1:100] 0.986 0.3274 -0.0511 0.35 0.688 ...</span>
<span class="co">#&gt;   ..- attr(*, "names")= chr [1:100] "t_1" "t_2" "t_3" "t_4" ...</span>
<span class="co">#&gt;  $ data     :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots</span>
<span class="co">#&gt;   .. ..@ i       : int [1:11419] 11 49 96 5 6 3 86 89 12 14 ...</span>
<span class="co">#&gt;   .. ..@ p       : int [1:2380] 0 3 5 8 9 12 13 14 15 18 ...</span>
<span class="co">#&gt;   .. ..@ Dim     : int [1:2] 100 2379</span>
<span class="co">#&gt;   .. ..@ Dimnames:List of 2</span>
<span class="co">#&gt;   .. .. ..$ : chr [1:100] "8693991" "8693362" "8607498" "8697008" ...</span>
<span class="co">#&gt;   .. .. ..$ : chr [1:2379] "discovered" "expected" "goal_research" "births" ...</span>
<span class="co">#&gt;   .. ..@ x       : num [1:11419] 0.00766 0.02997 0.01959 0.03493 0.03708 ...</span>
<span class="co">#&gt;   .. ..@ factors : list()</span>
<span class="co">#&gt;  - attr(*, "class")= chr "lsa_topic_model"</span></code></pre></div>
<p>We cannot get a proper R-squared for an LSA model. (Actually, multiplying <span class="math inline">\(\Phi \cdot S \cdot \Theta\)</span> would give us exactly our document term matrix and an R-squared of <span class="math inline">\(1\)</span>. There isn’t really a proper interpretation of <span class="math inline">\(\Phi \cdot \Theta\)</span> with LSA.)</p>
<p>However, we can still use probabilistic coherence to evaluate individual topics. We’ll also get our top terms and make a summary table as we did with LDA, above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># probabilistic coherence, a measure of topic quality</span>
<span class="co"># - can be used with any topic lsa_model, e.g. LSA</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(lsa_model<span class="op">$</span>coherence)
<span class="co">#&gt;     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. </span>
<span class="co">#&gt; -0.05107  0.18792  0.29267  0.34172  0.38925  0.99000</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/hist">hist</a></span>(lsa_model<span class="op">$</span>coherence, <span class="dt">col=</span> <span class="st">"blue"</span>)</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-14-1.png" width="720"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Get the top terms of each topic</span>
lsa_model<span class="op">$</span>top_terms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetTopTerms.html">GetTopTerms</a></span>(<span class="dt">phi =</span> lsa_model<span class="op">$</span>phi, <span class="dt">M =</span> <span class="dv">5</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(lsa_model<span class="op">$</span>top_terms))</code></pre></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left">t_1</td>
<td align="left">sarcomeric_structure</td>
<td align="left">cleavage</td>
<td align="left">inhibition_cts</td>
<td align="left">pathogenic_properties</td>
<td align="left">association</td>
</tr>
<tr class="even">
<td align="left">t_2</td>
<td align="left">abstract</td>
<td align="left">provided</td>
<td align="left">excision</td>
<td align="left">excision_repair</td>
<td align="left">dna_damage</td>
</tr>
<tr class="odd">
<td align="left">t_3</td>
<td align="left">hiv</td>
<td align="left">cdk</td>
<td align="left">diabetes</td>
<td align="left">cells</td>
<td align="left">research</td>
</tr>
<tr class="even">
<td align="left">t_4</td>
<td align="left">diabetes</td>
<td align="left">cdtr</td>
<td align="left">wu_cdtr</td>
<td align="left">wu</td>
<td align="left">ucdc</td>
</tr>
<tr class="odd">
<td align="left">t_5</td>
<td align="left">pd</td>
<td align="left">hlrrk</td>
<td align="left">mutant</td>
<td align="left">mutant_hlrrk</td>
<td align="left">lrrk</td>
</tr>
<tr class="even">
<td align="left">t_6</td>
<td align="left">ptc</td>
<td align="left">brafv</td>
<td align="left">vegfr</td>
<td align="left">ptc_cells</td>
<td align="left">ipf</td>
</tr>
</tbody></table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Get the prevalence of each topic</span>
<span class="co"># You can make this discrete by applying a threshold, say 0.05, for</span>
<span class="co"># topics in/out of docuemnts. </span>
lsa_model<span class="op">$</span>prevalence &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(lsa_model<span class="op">$</span>theta) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(lsa_model<span class="op">$</span>theta) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>

<span class="co"># textmineR has a naive topic labeling tool based on probable bigrams</span>
lsa_model<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../reference/LabelTopics.html">LabelTopics</a></span>(<span class="dt">assignments =</span> lsa_model<span class="op">$</span>theta <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.05</span>, 
                            <span class="dt">dtm =</span> dtm,
                            <span class="dt">M =</span> <span class="dv">1</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(lsa_model<span class="op">$</span>labels)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="left">label_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>t_1</td>
<td align="left">goal_research</td>
</tr>
<tr class="even">
<td>t_2</td>
<td align="left">goal_research</td>
</tr>
<tr class="odd">
<td>t_3</td>
<td align="left">goal_research</td>
</tr>
<tr class="even">
<td>t_4</td>
<td align="left">cancer_prevention</td>
</tr>
<tr class="odd">
<td>t_5</td>
<td align="left">laparoscopic_fundoplication</td>
</tr>
<tr class="even">
<td>t_6</td>
<td align="left">laparoscopic_fundoplication</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># put them together, with coherence into a summary table</span>
lsa_model<span class="op">$</span>summary &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">topic =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(lsa_model<span class="op">$</span>phi),
                            <span class="dt">label =</span> lsa_model<span class="op">$</span>labels,
                            <span class="dt">coherence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(lsa_model<span class="op">$</span>coherence, <span class="dv">3</span>),
                            <span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(lsa_model<span class="op">$</span>prevalence,<span class="dv">3</span>),
                            <span class="dt">top_terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(lsa_model<span class="op">$</span>top_terms, <span class="dv">2</span>, <span class="cf">function</span>(x){
                              <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(x, <span class="dt">collapse =</span> <span class="st">", "</span>)
                            }),
                            <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lsa_model<span class="op">$</span>summary[ <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(lsa_model<span class="op">$</span>summary<span class="op">$</span>prevalence, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>) , ][ <span class="dv">1</span><span class="op">:</span><span class="dv">10</span> , ]</code></pre></div>
<table class="table">
<caption>Summary of 10 most prevalent LSA topics</caption>
<thead><tr class="header">
<th></th>
<th align="left">topic</th>
<th align="left">label_1</th>
<th align="right">coherence</th>
<th align="right">prevalence</th>
<th align="left">top_terms</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>t_3</td>
<td align="left">t_3</td>
<td align="left">goal_research</td>
<td align="right">-0.051</td>
<td align="right">88.412</td>
<td align="left">hiv, cdk, diabetes, cells, research</td>
</tr>
<tr class="even">
<td>t_2</td>
<td align="left">t_2</td>
<td align="left">goal_research</td>
<td align="right">0.327</td>
<td align="right">10.058</td>
<td align="left">abstract, provided, excision, excision_repair, dna_damage</td>
</tr>
<tr class="odd">
<td>t_7</td>
<td align="left">t_7</td>
<td align="left">excision_repair</td>
<td align="right">0.612</td>
<td align="right">8.547</td>
<td align="left">ipf, lung, fundoplication, laparoscopic, laparoscopic_fundoplication</td>
</tr>
<tr class="even">
<td>t_15</td>
<td align="left">t_15</td>
<td align="left">mast_cell</td>
<td align="right">0.125</td>
<td align="right">4.786</td>
<td align="left">cdk, nmdar, calpain, microbiome, brain</td>
</tr>
<tr class="odd">
<td>t_13</td>
<td align="left">t_13</td>
<td align="left">hearing_aid</td>
<td align="right">0.990</td>
<td align="right">4.756</td>
<td align="left">battery, li, batteries, hearing_aid, hearing</td>
</tr>
<tr class="even">
<td>t_22</td>
<td align="left">t_22</td>
<td align="left">mast_cell</td>
<td align="right">0.221</td>
<td align="right">4.602</td>
<td align="left">psoriasis, microbiome, mast, fertility, cutaneous_microbiome</td>
</tr>
<tr class="odd">
<td>t_20</td>
<td align="left">t_20</td>
<td align="left">cancer_prevention</td>
<td align="right">0.695</td>
<td align="right">3.913</td>
<td align="left">force, sarcomere_length, length, length_dependence, power</td>
</tr>
<tr class="even">
<td>t_26</td>
<td align="left">t_26</td>
<td align="left">sand_fly</td>
<td align="right">0.360</td>
<td align="right">3.886</td>
<td align="left">fa, nrf, natural_products, plm, acids</td>
</tr>
<tr class="odd">
<td>t_60</td>
<td align="left">t_60</td>
<td align="left">arterial_inflammation</td>
<td align="right">0.072</td>
<td align="right">3.511</td>
<td align="left">seizure, seizures, inflammation, infant, imaging</td>
</tr>
<tr class="even">
<td>t_11</td>
<td align="left">t_11</td>
<td align="left">mast_cell</td>
<td align="right">0.590</td>
<td align="right">3.360</td>
<td align="left">diabetes, excision, excision_repair, dna_damage, uv</td>
</tr>
</tbody>
</table>
<p>One key mathematical difference is how you calculate <span class="math inline">\(\Gamma\)</span>. For LSA the operation is</p>
<span class="math display">\[\begin{align}
  \Gamma &amp;=
    (S\cdot\Phi)^{-1}
\end{align}\]</span>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get topic predictions for all 5,000 documents</span>

<span class="co"># set up the assignments matrix and a simple dot product gives us predictions</span>
lsa_assignments &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(dtm <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">rowSums</a></span>(dtm)) <span class="op">*</span><span class="st"> </span>tf_sample<span class="op">$</span>idf

lsa_assignments &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(lsa_assignments)

lsa_assignments &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(lsa_model, lsa_assignments)</code></pre></div>
<p>In this case, there is no Bayesian/frequentist difference. So there’s only one way to predict. Note that in the case above, we had to do the IDF reweighting before passing to <code>predict.lsa_topic_model</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compare the "fit" assignments to the predicted ones</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/barplot">barplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(lsa_model<span class="op">$</span>theta[ <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(dtm)[ <span class="dv">1</span> ] , ],
              lsa_assignments[ <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(dtm)[ <span class="dv">1</span> ] , ]), 
        <span class="dt">las =</span> <span class="dv">2</span>,
        <span class="dt">main =</span> <span class="st">"Comparing topic assignments in LSA"</span>,
        <span class="dt">beside =</span> <span class="ot">TRUE</span>,
        <span class="dt">col =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))

<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/legend">legend</a></span>(<span class="st">"topleft"</span>, 
       <span class="dt">legend =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"During fitting"</span>, <span class="st">"Predicted"</span>),
       <span class="dt">fill =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-24-1.png" width="720"></p>
</div>
<div id="other-topic-models" class="section level3">
<h3 class="hasAnchor">
<a href="#other-topic-models" class="anchor"></a>Other topic models</h3>
<p>As of this writing, textmineR has implementations of</p>
<ul>
<li>LDA using Gibbs sampling implemented natively in textmineR</li>
<li>LSA using a single value decomposition from the <a href="https://CRAN.R-project.org/package=RSpectra"><code>RSpectra</code></a> package</li>
<li>Correlated topic models (CTM) from the <a href="https://CRAN.R-project.org/package=topicmodels"><code>topicmodels</code></a> package</li>
</ul>
<p>A future version of textmineR will have an implementation of a structural topic model from the <a href="https://CRAN.R-project.org/package=stm"><code>stm</code></a> package.</p>
<p>All of the above have nearly identical syntax and workflows as detailed above.</p>
</div>
<div id="extensions" class="section level3">
<h3 class="hasAnchor">
<a href="#extensions" class="anchor"></a>Extensions</h3>
<div id="document-clustering-is-just-a-special-topic-model" class="section level4">
<h4 class="hasAnchor">
<a href="#document-clustering-is-just-a-special-topic-model" class="anchor"></a>Document clustering is just a special topic model</h4>
<p>Document clustering can be thought of as a topic model where each document contains exactly one topic. textmineR’s <code>Cluster2TopicModel</code> function allows you to take a clustering solution and a document term matrix and turn it into a probabilistic topic model representation. You can use many of textmineR’s topic model utilities to evaluate your clusters (e.g. R-squared, coherence, labels, etc.)</p>
</div>
<div id="choosing-the-number-of-topics" class="section level4">
<h4 class="hasAnchor">
<a href="#choosing-the-number-of-topics" class="anchor"></a>Choosing the number of topics</h4>
<p>There is no commonly accepted way to choose the number of topics in a topic model. Fear not! Probabilistic coherence can help you. In forthcoming research, I show that probabilistic coherence can find the correct number of topics on a simulated corpus where the number of topics is known beforehand. (This will be part of a PhD dissertation, sometime around 2021. Stand by!)</p>
<p>Users can implement this procedure. Simply fit several topic models across a range of topics. Then calculate the probabilistic coherence for each topic in each model. Finally, average the probabilistic coherence across all topics in a model. This is similar to using the <a href="https://en.wikipedia.org/wiki/Silhouette_(clustering)">silhouette coefficient</a> to select the number of clusters when clustering.</p>
<p>Some example code (on a trivially small dataset packaged with textmineR) is below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load a sample DTM</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(nih_sample_dtm)

<span class="co"># choose a range of k </span>
<span class="co"># - here, the range runs into the corpus size. Not recommended for large corpora!</span>
k_list &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">10</span>,<span class="dv">85</span>, <span class="dt">by=</span><span class="dv">15</span>)

<span class="co"># you may want toset up a temporary directory to store fit models so you get </span>
<span class="co"># partial results if the process fails or times out. This is a trivial example, </span>
<span class="co"># but with a decent sized corpus, the procedure can take hours or days, </span>
<span class="co"># depending on the size of the data and complexity of the model.</span>
<span class="co"># I suggest using the digest package to create a hash so that it's obvious this </span>
<span class="co"># is a temporary directory</span>
model_dir &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"models_"</span>, digest<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/digest/topics/digest">digest</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(nih_sample_dtm), <span class="dt">algo =</span> <span class="st">"sha1"</span>))

<span class="co"># Fit a bunch of LDA models</span>
<span class="co"># even on this trivial corpus, it will a bit of time to fit all of these models</span>
model_list &lt;-<span class="st"> </span><span class="kw"><a href="../reference/TmParallelApply.html">TmParallelApply</a></span>(<span class="dt">X =</span> k_list, <span class="dt">FUN =</span> <span class="cf">function</span>(k){

  m &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FitLdaModel.html">FitLdaModel</a></span>(<span class="dt">dtm =</span> nih_sample_dtm, 
                   <span class="dt">k =</span> k, 
                   <span class="dt">iterations =</span> <span class="dv">200</span>, 
                   <span class="dt">burnin =</span> <span class="dv">180</span>,
                   <span class="dt">alpha =</span> <span class="fl">0.1</span>,
                   <span class="dt">beta =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(nih_sample_dtm) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(nih_sample_dtm) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,
                   <span class="dt">optimize_alpha =</span> <span class="ot">TRUE</span>,
                   <span class="dt">calc_likelihood =</span> <span class="ot">FALSE</span>,
                   <span class="dt">calc_coherence =</span> <span class="ot">TRUE</span>,
                   <span class="dt">calc_r2 =</span> <span class="ot">FALSE</span>,
                   <span class="dt">cpus =</span> <span class="dv">1</span>)
  m<span class="op">$</span>k &lt;-<span class="st"> </span>k
  
  m
}, <span class="dt">export=</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>(), <span class="co"># c("nih_sample_dtm"), # export only needed for Windows machines</span>
<span class="dt">cpus =</span> <span class="dv">2</span>) 

<span class="co"># Get average coherence for each model</span>
coherence_mat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">k =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(model_list, <span class="cf">function</span>(x) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(x<span class="op">$</span>phi)), 
                            <span class="dt">coherence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(model_list, <span class="cf">function</span>(x) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x<span class="op">$</span>coherence)), 
                            <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)


<span class="co"># Plot the result</span>
<span class="co"># On larger (~1,000 or greater documents) corpora, you will usually get a clear peak</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(coherence_mat, <span class="dt">type =</span> <span class="st">"o"</span>)</code></pre></div>
<p><img src="c_topic_modeling_files/figure-html/unnamed-chunk-25-1.png" width="720"></p>
</div>
<div id="using-topic-models-from-other-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#using-topic-models-from-other-packages" class="anchor"></a>Using topic models from other packages</h4>
<p>Topic models from other packages can be used with textmineR. The workflow would look something like this:</p>
<ol style="list-style-type: decimal">
<li>Use <code>CreateDtm</code> to create a curated DTM</li>
<li>Use <code>Dtm2Docs</code> to re-create a text vector of curated tokens from your DTM</li>
<li>Fit a topic model using your desired package (for example, <a href="https://CRAN.R-project.org/package=mallet">mallet</a>)</li>
<li>Format the raw output to have two matrices, phi and theta as above</li>
<li>Use textmineR’s suite of utility functions with your model</li>
</ol>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#topic-modeling">Topic modeling</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thomas Jones.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  
</body>
</html>
